{
    "collab_server" : "",
    "contents" : "Data<-function(directorio){\n  setwd(directorio)\n  \n  objetivo=read.csv2(\"CasoEstimacion.csv\",header=TRUE,dec=\",\")\n  names(objetivo)=c(\" \",\"FECHA\",\"nexped\",\"VUMERCADO\",\"latitud\",\"longitud\",\"NUMBANOS\",\"NUMDORMITO\",\"SUPCONST\",\"CCBU\",\"antiguedad\",\"DEPRECIAVV\",\"NUMEROASCE\",\"capa\",\n                    \"SUPPARCELA\",\"DATOSPLANT\",\"NUMEROPLAN\",\"EXTINT\",\"idtramo\")\n  \n  if(is.na(objetivo$FECHA) | objetivo$FECHA==format(Sys.time(),\"%d-%m-%Y\")){\n    objetivo$FECHA=as.Date(paste(format(Sys.time(),\"%Y-%m\"),\"01\",sep=\"-\"))}\n  \n  if(objetivo$FECHA != format(Sys.time(),\"%d-%m-%Y\")){objetivo$FECHA<-as.Date(objetivo$FECHA,\"%d-%m-%Y\")}\n  \n  \n  \n  \n  X<-read.csv2(\"DatosMuestra.csv\",header=TRUE,dec=\",\")\n  names(X)=c(\"FECHA\",\"nexped\",\"VUMERCADO\",\"latitud\",\"longitud\",\"NUMBANOS\",\"NUMDORMITO\",\"SUPCONST\",\"CCBU\",\"antiguedad\",\"DEPRECIAVV\",\"NUMEROASCE\",\"capa\",\n             \"SUPPARCELA\",\"DATOSPLANT\",\"NUMEROPLAN\",\"idtramo\",\"idZona\",\"idzona\",\"Distancia\",\"idzonaRef\",\"EXTINT\")\n  X$FECHA<-as.Date(as.vector(X$FECHA),\"%d-%m-%Y\")\n  \n  \n  X$idtramo=ifelse(X$idtramo==1,250,ifelse(X$idtramo==10,550,ifelse(X$idtramo==20,650,ifelse(X$idtramo==30,750,\n                                                                                             ifelse(X$idtramo==40,900,ifelse(X$idtramo==50,1100,ifelse(X$idtramo==60,1300,ifelse(X$idtramo==70,1550,\n                                                                                                                                                                                 ifelse(X$idtramo==80,1850,ifelse(X$idtramo==90,2150,ifelse(X$idtramo==100,2550,ifelse(X$idtramo==110,3050,\n                                                                                                                                                                                                                                                                       ifelse(X$idtramo==120,3550,ifelse(X$idtramo==130,4150,ifelse(X$idtramo==140,4850,ifelse(X$idtramo==150,5200,NA))))))))))))))))\n  \n  objetivo$idtramo=ifelse(objetivo$idtramo==1,250,ifelse(objetivo$idtramo==10,550,ifelse(objetivo$idtramo==20,650,ifelse(objetivo$idtramo==30,750,\n                                                                                                                         ifelse(objetivo$idtramo==40,900,ifelse(objetivo$idtramo==50,1100,ifelse(objetivo$idtramo==60,1300,ifelse(objetivo$idtramo==70,1550,\n                                                                                                                                                                                                                                  ifelse(objetivo$idtramo==80,1850,ifelse(objetivo$idtramo==90,2150,ifelse(objetivo$idtramo==100,2550,ifelse(objetivo$idtramo==110,3050,\n                                                                                                                                                                                                                                                                                                                                             ifelse(objetivo$idtramo==120,3550,ifelse(objetivo$idtramo==130,4150,ifelse(objetivo$idtramo==140,4850,ifelse(objetivo$idtramo==150,5200,NA))))))))))))))))\n  \n  \n  X<-subset(X, X$VUMERCADO!=0 & X$antiguedad>=0 & X$DEPRECIAVV>=0 & X$NUMBAN<99 & X$NUMDORMITO<99 & X$idtramo>0 & X$NUMBANOS>=0 & X$NUMDORMITO>=0)\n  \n  if(objetivo$capa==2){\n    \n    X$semisot=ifelse(X$DATOSPLANT==3,1,0)\n    X$pbaja=ifelse(X$DATOSPLANT==5,1,0)\n    X$sin.ascensor=ifelse(X$NUMEROASCE==0,1,0)\n    X$atico=ifelse(X$DATOSPLANT==1,1,0)\n    INTERIOR<-X$EXTINT-1\n    X<-cbind(X,INTERIOR)\n    \n    objetivo$semisot=ifelse(objetivo$DATOSPLANT==3,1,0)\n    objetivo$pbaja=ifelse(objetivo$DATOSPLANT==5,1,0)\n    objetivo$sin.ascensor=ifelse(objetivo$NUMEROASCE==0,1,0)\n    objetivo$atico=ifelse(objetivo$DATOSPLANT==1,1,0)\n    objetivo$INTERIOR<-objetivo$EXTINT-1\n  }\n  \n  return(list(X=X,objetivo=objetivo))\n}",
    "created" : 1496746221399.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "1196355505",
    "id" : "BB551A4",
    "lastKnownWriteTime" : 1494929441,
    "last_content_update" : 1494929441,
    "path" : "C:/Users/TBG/Desktop/Modelo Innocv/Modelo web/R/Data.R",
    "project_path" : null,
    "properties" : {
    },
    "relative_order" : 6,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}